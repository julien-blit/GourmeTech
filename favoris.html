<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.6" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Amarante&family=Boldonse&family=Bungee+Tint&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"/>
    <link rel="stylesheet" href="css/index.css" />
    <style>

      h4 {
        text-align: center;
        color: darkorange;
        font-size: 2rem;
      }
      #recipe-details {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none; /* cach√© par d√©faut */
        justify-content: center;
        align-items: center;
      }
      
      .recipe-details-container {
        background-color: darkorange;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        color: #555;
        width: 80%;
        max-width: 600px;
      }
      
      #recipe-title {
        font-size: 2rem;
        margin-bottom: 20px;
      }
      
      #recipe-description {
        font-size: 1rem;
        margin-bottom: 20px;
      }
      
      .cards-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* Trois colonnes */
        gap: 20px; /* Espace entre les cartes */
        margin-top: 20px;
      }
      
      /* ! Style des cartes de recette */
      
      .card {
        border: 1px solid #ddd;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }
      
      .card:hover {
        transform: scale(1.05); 
      }
      
      .card .img-container {
        width: 100%;
        height: 200px;
        overflow: hidden;
      }
      
      .card .card-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      .card .recipe-title {
        font-size: 1.2rem;
        font-weight: bold;
        margin: 10px;
      }
      
      .card .description {
        font-size: 1rem;
        color: #555;
        margin: 10px;
      }
      
      .card .btn {
        display: block;
        padding: 10px;
        text-align: center;
        background-color: #ff7f50;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        margin: 10px;
      }
      
      .card .btn:hover {
        background-color: #ff5722;
      }
      
      /* ! Responsive design */
      
      @media (max-width: 1024px) {
        .cards-container {
          grid-template-columns: repeat(2, 1fr); 
        }
      }
      
      @media (max-width: 600px) {
        .cards-container {
          grid-template-columns: 1fr; 
        }
      
        .recipe-details-container {
          width: 90%;
          padding: 15px;
        }
      
        #recipe-title {
          font-size: 1.5rem;
        }
      
        #recipe-description {
          font-size: 0.9rem;
        }
      
        .card .img-container {
          height: 150px; 
        }
      
        .card .recipe-title {
          font-size: 1rem;
        }
      
        .card .description {
          font-size: 0.9rem;
        }
      }
      </style>
    <title>GourmeTech</title>
  </head>
  <body>
    <header id="top">
      <div>
        <nav>
          <div class="logo-title">
            <div class="logo">
              <a href="index.html"><span class="letter">G</span>
            </div>
            <h1 class="title">GourmeTech</h1></a>
          </div>
          <button class="menu-toggle" id="btn">‚ò∞</button>
          <ul class="nav-links" id="nav-links">
            <li><a href="ajouter-recettes.html">Ajouter une recette</a></li>
            <li><a href="favoris.html">Mes Favoris</a></li>
            <li><a href="generer.html">Recettes Al√©atoire</a></li>
            <li><a href="a-propos.html">√Ä Propos</a></li>
          </ul>
          <button class="dark-toggle" id="dark-mode-toggle">üåô</button>
        </nav>
      </div>
    </header>
    <section>
      <div class="general">
        <div class="search-container">
          <input type="text" placeholder="Rechercher une recette..." class="search-input"/>
          <button class="search-button">Rechercher</button>
        </div>
        <div class="filter-container">
          <div class="filter-group">
            <p>Cat√©gorie :</p>
            <label><input type="checkbox" name="category" value="entr√©e" />
              Entr√©e</label>
            <label><input type="checkbox" name="category" value="plat" />
              Plat</label>
            <label><input type="checkbox" name="category" value="dessert" />
              Dessert</label>
          </div>

          <div class="filter-group">
            <p>Temps de pr√©paration :</p>
            <label><input type="checkbox" name="time" value="-15" /> - 15 min</label>
            <label><input type="checkbox" name="time" value="15-30" /> 15 ‚Äì 30 min</label>
            <label><input type="checkbox" name="time" value="+30" /> + 30 min</label>
          </div>

          <div class="filter-group">
            <p>Difficult√©:</p>
            <label><input type="checkbox" name="difficulty" value="Facile" />
              Facile</label>
            <label><input type="checkbox" name="difficulty" value="Moyen" />
              Moyen</label>
            <label><input type="checkbox" name="difficulty" value="Difficile" />
              Difficile</label>
          </div>
        </div>
      </div>
      <div class="no-result" style="display: none; text-align: center; margin-top: 2rem">
        <p style="color: red;"> Aucune recette trouv√©e üò¢</p>
      </div>
    </section>

    <div id="recipeModal" class="modal" hidden>
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="modalTitle">Titre de la recette</h2>
        <img id="modalImage" src="" alt="image recette" style="max-width:100%; height:auto;">
        <p><strong>Cat√©gorie :</strong> <span id="modalType"></span></p>
        <p><strong>Dur√©e :</strong> <span id="modalDuration"></span></p>
        <p><strong>Difficult√© :</strong> <span id="modalDifficulty"></span></p>
      </div>
    </div>

     <h4>Mes Recettes Favorites</h4>
    <hr>
    <main class="main-content">    
      <div class="cards-container" id="favorites-container">
      <!-- Les recettes favorites seront inject√©es ici -->
    </div>
    <div id="recipe-details">
      <div class="recipe-details-container">
        <button onclick="closeRecipeDetails()">Fermer</button>
        <h2 id="recipe-title"></h2>
        <div class="img-container">
         <!-- <span class="coeur">ü§ç</span>--> 
          <img id="recipe-image" src="" alt="" class="card-img" /> 
        </div>
        <!-- <img id="recipe-image" src="" alt="" class="card-img" /> -->
        <p id="recipe-description"></p>
        <p id="recipe-temps"></p>
        <p id="recipe-ingredients">Ingredients: </p>
        <!-- details-->
      </div>
    </div>
  </main>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const heartIcons = document.querySelectorAll(".coeur"); // Cibler tous les c≈ìurs
  const recipes = document.querySelectorAll(".card"); // Cibler toutes les cartes de recettes

  // Charger les favoris depuis le localStorage
  const loadFavorites = () => {
    const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
    heartIcons.forEach((heart, index) => {
      if (favorites.includes(index)) {
        heart.textContent = "‚ù§Ô∏è"; // Coeur rempli si recette est favorite
      } else {
        heart.textContent = "ü§ç"; // Coeur vide si recette n'est pas favorite
      }
    });
  };

  // Sauvegarder les favoris dans le localStorage
  const saveFavorites = (favorites) => {
    localStorage.setItem("favorites", JSON.stringify(favorites));
  };

  // Ajouter ou retirer une recette des favoris au clic
  heartIcons.forEach((heart, index) => {
    heart.addEventListener("click", () => {
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      
      if (favorites.includes(index)) {
        // Si d√©j√† dans les favoris, retirer
        favorites = favorites.filter(item => item !== index);
        heart.textContent = "ü§ç"; // Coeur vide
      } else {
        // Si pas encore dans les favoris, ajouter
        favorites.push(index);
        heart.textContent = "‚ù§Ô∏è"; // Coeur rempli
      }
      
      // Sauvegarder la liste mise √† jour des favoris
      saveFavorites(favorites);
    });
  });

  // Charger les favoris lorsque la page est pr√™te
  loadFavorites();
});

document.addEventListener("DOMContentLoaded", () => {
  const favoritesContainer = document.getElementById("favorites-container");
  let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

  const allRecipes = [
  {
    title: "Tarte aux pommes",
    image: "assets/images/tarte-pommes.jpg",
    url: "recette.html#tarte-pommes",
    description: "Dessert facile, pr√©paration 60 min.",
    difficulty: "Facile",  
    temps: "60 min",
    categorie: "Dessert",
    ingredients: "4 pommes,1 p√¢te feuillet√©e, 50g de sucre, 20g de beurre,1 sachet de sucre vanill√©"
  },
  {
    title: "Ratatouille Proven√ßale",
    image: "assets/images/ratatouille.jpg",
    url: "recette.html#ratatouille",
    description: "Plat moyen, pr√©paration 60 min.",    
    difficulty: "Moyen", 
    temps: "60 min",
    categorie : "Plat",
    ingredients: "2 aubergines, 2 courgettes, 2 poivrons (rouge et vert), 4 tomates, 2 oignons,2 gousses d‚Äôail"
  },
  {
    title: "Velout√© de potiron",
    image: "assets/images/veloute-potiron.jpg",
    url: "recette.html#veloute-potiron",
    description: "Facile, pr√©paration 30 min.",
    difficulty: "Facile",
    temps: "30 min",
    categorie : "Entr√©e",
    ingredients: "1 kg de potiron, 2 pommes de terre, 1 oignon, 1 cube de bouillon, 20 cl de cr√®me, Sel, poivre"
  }
];

  const saveFavorites = (favorites) => {
    localStorage.setItem("favorites", JSON.stringify(favorites));
  };

  const renderFavorites = () => {
    favoritesContainer.innerHTML = ""; // Vider l'affichage
    favorites.forEach(index => {
      const recipe = allRecipes[index];
      const recipeCard = document.createElement("div");
      recipeCard.classList.add("card");
      recipeCard.dataset.index = index;
      recipeCard.innerHTML = `
        <div class="img-container">
          <span class="coeur">‚ù§Ô∏è</span>
          <img src="${recipe.image}" alt="${recipe.title}" class="card-img" />
        </div>
        <h2 class="recipe-title">${recipe.title}</h2>     
        <div class="card-content">
          <p class="type">${recipe.categorie}</p>
          <p class="duration">${recipe.temps}</p>
          <p class="difficulty">${recipe.difficulty}</p>
        </div>
        <div class="container">
          <button class="btn" data-recipe-id="${index}">Voir la recette</button>
        </div>`;
      favoritesContainer.appendChild(recipeCard);
    });

    // R√©assigner les √©v√©nements clics
    document.querySelectorAll(".coeur").forEach((heart) => {
      heart.addEventListener("click", (e) => {
        const card = e.target.closest(".card");
        const index = parseInt(card.dataset.index);
        favorites = favorites.filter(fav => fav !== index);
        saveFavorites(favorites);
        renderFavorites(); // Re-render
      });
    });

    document.querySelectorAll(".btn").forEach((button) => {
      button.addEventListener("click", (e) => {
        const recipeId = parseInt(e.target.getAttribute("data-recipe-id"));
        const recipe = allRecipes[recipeId];
        showRecipeDetails(recipe);
      });
    });
  };

  renderFavorites();
});

// Fonction pour afficher les d√©tails de la recette dans un div
function showRecipeDetails(recipe) {
  const detailsDiv = document.getElementById("recipe-details");
  const title = document.getElementById("recipe-title");
  const image = document.getElementById("recipe-image");
  const description = document.getElementById("recipe-description");
  const ingredients = document.getElementById("recipe-ingredients");

  // Remplir le div avec les d√©tails de la recette
  title.textContent = recipe.title;
  image.src = recipe.image;
  image.alt = recipe.title;
  description.textContent = recipe.description;
  ingredients.textContent = recipe.ingredients;

  // Afficher le div
  detailsDiv.style.display = "flex";
}

// Fonction pour fermer le div des d√©tails
function closeRecipeDetails() {
  const detailsDiv = document.getElementById("recipe-details");
  detailsDiv.style.display = "none";
}

</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.querySelector(".search-input");
    const filterInputs = document.querySelectorAll(".filter-container input");
    const noResultDiv = document.querySelector(".no-result");
  
    function normalizeText(text) {
      return text.toLowerCase().trim();
    }
  
    function applyFilters() {
  const query = normalizeText(searchInput.value);
  const selectedCategories = Array.from(document.querySelectorAll("input[name='category']:checked")).map(cb => cb.value);
  const selectedTimes = Array.from(document.querySelectorAll("input[name='time']:checked")).map(cb => cb.value);
  const selectedDifficulties = Array.from(document.querySelectorAll("input[name='difficulty']:checked")).map(cb => cb.value);
  let anyVisible = false;

  document.querySelectorAll("#favorites-container .card").forEach(card => {
    const title = normalizeText(card.querySelector(".recipe-title").textContent);
    const category = normalizeText(card.querySelector(".type").textContent);
    const duration = card.querySelector(".duration").textContent;
    const difficulty = normalizeText(card.querySelector(".difficulty").textContent);

    let durationValue = parseInt(duration);
    let matchesQuery = title.includes(query);
    let matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(category);
    let matchesTime = selectedTimes.length === 0 || selectedTimes.some(time => {
      if (time === "-15") return durationValue < 15;
      if (time === "15-30") return durationValue >= 15 && durationValue <= 30;
      if (time === "+30") return durationValue > 30;
    });
    let matchesDifficulty = selectedDifficulties.length === 0 || selectedDifficulties.map(d => d.toLowerCase()).includes(difficulty);

    if (matchesQuery && matchesCategory && matchesTime && matchesDifficulty) {
    card.style.display = "";
    anyVisible = true;
  } else {
    card.style.display = "none";
  }
  });

  noResultDiv.style.display = anyVisible ? "none" : "block";
}
  
    // Attacher les √©v√©nements
    searchInput.addEventListener("input", applyFilters);
    filterInputs.forEach(input => input.addEventListener("change", applyFilters));
  });
  </script>

    <script src="js/script.js"></script>
    <footer>
      <hr width="100%" color="orange" />
      <div class="footer-content">
        <div class="aside">
          <div class="footer-column">
            <h2>Navigation</h2>
            <ul>
              <!-- <li><a href="#top">Accueil</a></li> -->
              <li><a href="ajouter-recettes.html">Ajouter une recette</a></li>
              <li><a href="favoris.html">Mes favoris</a></li>
              <li><a href="generer.html">Recettes Al√©atoire</a></li>
              <li><a href="a-propos.html">√Ä Propos</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h2>√Ä propos de GourmeTech</h2>
            <h3>
              GourmeTech est une plateforme de recettes culinaires<br />interactive
              d√©velopp√©e dans le cadre d'un projet p√©dagogique.
            </h3>
          </div>
        </div>
      </div>
      <div class="footer">
        <p class="copyright">¬© 2025 GourmeTech - Tous droits r√©serv√©s</p>
      </div>
    </footer>
  </body>
</html>
